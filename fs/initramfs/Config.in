config BR2_TARGET_ROOTFS_INITRAMFS
	bool "initial RAM filesystem linked into linux kernel"
	depends on BR2_LINUX_KERNEL
	help
	  Integrate an initramfs inside the kernel image.
	  This integration will take place automatically.

	  The initramfs contents can either be the full root filesystem
	  generated by buildroot, or an image built from a custom list
	  of files specified via the BR2_TARGET_ROOTFS_INITRAMFS_CUSTOM_CONTENTS
	  config option.

choice
	prompt "initial RAM filesystem contents"
	depends on BR2_TARGET_ROOTFS_INITRAMFS

config BR2_TARGET_ROOTFS_INITRAMFS_ROOTFS
	bool "rootfs.cpio"
	depends on BR2_TARGET_ROOTFS_INITRAMFS
	select BR2_TARGET_ROOTFS_CPIO
	help
	  Integrate the root filesystem generated by Buildroot as an
	  initramfs inside the kernel image. This integration will
	  take place automatically.

	  A rootfs.cpio file will be generated in the images/ directory.
	  This is the archive that will be included in the kernel image.
	  The default rootfs compression set in the kernel configuration
	  is used, regardless of how buildroot's cpio archive is
	  configured.

	  Note that enabling this option together with another filesystem
	  formats doesn't make sense: you would end up having two
	  identical root filesystems, one embedded inside the kernel
	  image, and one separately.
config BR2_TARGET_ROOTFS_INITRAMFS_CUSTOM
	bool "custom initramfs contents"
	depends on BR2_TARGET_ROOTFS_INITRAMFS
	help
	  Use the contents of BR2_TARGET_ROOTFS_INITRAMFS_CUSTOM_CONTENTS
	  as the linux kernel configuration variable CONFIG_INITRAMFS_SOURCE

endchoice

config BR2_TARGET_ROOTFS_INITRAMFS_CUSTOM_CONTENTS
	string "custom initramfs contents"
	depends on BR2_TARGET_ROOTFS_INITRAMFS_CUSTOM
	help
	  Custom value to use as CONFIG_INITRAMFS_SOURCE linux kernel configuration
	  variable. See Documentation/filesystems/ramfs-rootfs-initramfs.txt in the
	  linux kernel sources for details.

comment "initramfs needs a Linux kernel to be built"
	depends on !BR2_LINUX_KERNEL
